(this.webpackJsonp=this.webpackJsonp||[]).push([[4],{1836:function(e,t,a){"use strict";a.r(t),function(e){var n,r=a(0),o=a.n(r),i=a(20),s=a(31),c=a(134),l=a(24),u=a.n(l),p=a(80),d=a(1330),f=a(3931),m=a(1337),b=a(86),h=a(3951),y=a(3944),E=a(350),g=a(1292),v=a(3750),S=a(3751),C=a.n(S),j=a(3752),A=a.n(j),O=a(658),x=a(734),T=a(665),D=a(662),w=a(94),k=a(3943);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,s=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){s=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},H={appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}};function L(e){return o.a.createElement(h.a,M({direction:"up"},e))}function G(e){var t=this,a=e.intl,n=(e.apiType,e.showAtOnce),i=e.history,c=e.docId,l=Object(r.useContext)(D.c),u=l.api,p=l.isAPIProduct,h=I(Object(r.useState)(n),2),S=h[0],j=h[1],N=I(Object(r.useState)(g.EditorState.createEmpty()),2),M=N[0],P=N[1],H=I(Object(r.useState)(!1),2),G=H[0],R=H[1],q=function(){if(S||U(),S&&n){var e="/".concat(p?"api-products":"apis","/").concat(u.id,"/documents");i.push(e)}j(!S)},U=function(){(p?new x.a:new O.a).getInlineContentOfDocument(u.id,c).then((function(e){var t=A()(e.text);if(t){var a=g.ContentState.createFromBlockArray(t.contentBlocks),n=g.EditorState.createWithContent(a);P(n)}})).catch((function(e){404===e.status&&t.setState({apiNotFound:!0})}))},B=e.classes,W=e.docName;return o.a.createElement("div",null,o.a.createElement(d.a,{onClick:q,disabled:Object(w.b)(["apim:api_create","apim:api_publish"],u)||u.isRevision,"aria-label":"Edit Content of "+W},o.a.createElement(y.a,null,"description"),o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.edit.content",defaultMessage:[{type:0,value:"Edit Content"}]})),o.a.createElement(f.a,{fullScreen:!0,open:S,onClose:q,TransitionComponent:L},o.a.createElement(E.a,{square:!0,className:B.popupHeader},o.a.createElement(m.a,{color:"inherit",onClick:q,"aria-label":"Close"},o.a.createElement(y.a,null,"close")),o.a.createElement(b.a,{variant:"h4",className:B.docName},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.edit.content.of",defaultMessage:[{type:0,value:"Edit Content of"}]})," ",'"',W,'"'),o.a.createElement(d.a,{className:B.button,variant:"contained",disabled:G,color:"primary",onClick:function(){var e=p?new x.a:new O.a;R(!0);var t=C()(Object(g.convertToRaw)(M.getCurrentContent()));e.addInlineContentToDocument(u.id,c,"INLINE",t).then((function(e){T.a.info("".concat(e.obj.name," ").concat(a.formatMessage({id:"Apis.Details.Documents.TextEditor.update.success.message",defaultMessage:[{type:0,value:"updated successfully."}]}))),q(),R(!1)})).catch((function(e){T.a.error("".concat(e," ").concat(a.formatMessage({id:"Apis.Details.Documents.TextEditor.update.error.message",defaultMessage:[{type:0,value:"update failed."}]}))),R(!1)}))}},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.update.content.button",defaultMessage:[{type:0,value:"Update Content"}]}),G&&o.a.createElement(k.a,{size:24})),o.a.createElement(d.a,{className:B.button,onClick:q},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.cancel.button",defaultMessage:[{type:0,value:"Cancel"}]}))),o.a.createElement("div",{className:B.splitWrapper},o.a.createElement(v.Editor,{editorState:M,wrapperClassName:"draftjs-wrapper",editorClassName:"draftjs-editor",onEditorStateChange:function(e){P(e)}}))))}P(G,"useContext{{ api, isAPIProduct }}\nuseState{[open, setOpen](showAtOnce)}\nuseState{[editorState, setEditorState](EditorState.createEmpty())}\nuseState{[isUpdating, setIsUpdating](false)}"),G.propTypes={classes:u.a.shape({}).isRequired,docId:u.a.string.isRequired,apiType:u.a.oneOf([O.a.CONSTS.API,O.a.CONSTS.APIProduct]).isRequired,intl:u.a.shape({}).isRequired,showAtOnce:u.a.bool.isRequired,api:u.a.shape({id:u.a.string,apiType:u.a.oneOf([O.a.CONSTS.API,O.a.CONSTS.APIProduct])}).isRequired};var R,q,U=Object(c.c)(Object(i.j)(Object(p.a)(H)(G)));t.default=U,(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(R.register(H,"styles","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),R.register(L,"Transition","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),R.register(G,"TextEditor","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),R.register(U,"default","/home/jenkins/workspace/platform-builds/apim-apps/target/checkout/portals/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx")),(q="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&q(e)}.call(this,a(44)(e))}}]);
//# sourceMappingURL=ListingTextEditor.3cd756f2a7f5956902b3.bundle.js.map