(this.webpackJsonp=this.webpackJsonp||[]).push([[11],{1804:function(e,t){},1805:function(e,t){},1844:function(e,t){},1845:function(e,t){},1851:function(e,t){},1861:function(e,t){},2334:function(e,t){},2667:function(e,t){},2669:function(e,t){},2704:function(e,t){},2706:function(e,t){},2707:function(e,t){},2712:function(e,t){},2714:function(e,t){},2733:function(e,t){},2745:function(e,t){},2748:function(e,t){},3988:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s.n(n),i=s(1618),o=s(1665),r=s(1619),c=s(17),d=s.n(c),u=s(1061),l=s(3951),p=s(42),h=s(1630),m=s(1662),y=s(2277),g=s.n(y),S=s(2278),A=s.n(S),f=s(2279),b=s(1276),v=s.n(b),T=s(2280),E=s.n(T),P=s(2752),k=s.n(P),I=s(1084),K=s(192),O=s(334),w=(s(1886),s(2959)),x=s(3545),C=s.n(x),R=s(1636),N=s(1635),j=s(3546),H=s.n(j);function U(e){const{BaseLayout:t,oldProps:s,spec:r}=e,c=Object(n.useMemo)(()=>function(e,t){const s=t.reduce((e,t)=>e[t],e);return s["x-auth-type"]&&"none"!==s["x-auth-type"].toLowerCase()}(r,s.specPath),[]);return a.a.createElement("div",null,a.a.createElement(o.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},a.a.createElement(o.a,{item:!0,md:11},a.a.createElement(t,s)),a.a.createElement(o.a,{item:!0,justify:"flex-end",alignItems:"right"},a.a.createElement(N.a,{title:c?a.a.createElement(i.a,{id:"Apis.Details.Resources.components.Operation.disable.security.when.used.in.api.products",defaultMessage:"Security enabled"}):a.a.createElement(i.a,{id:"Apis.Details.Resources.components.enabled.security",defaultMessage:"No security"}),"aria-label":a.a.createElement(i.a,{id:"Apis.Details.Resources.components.Operation.security.operation",defaultMessage:"Security "})},a.a.createElement(R.a,{"aria-label":"Security"},c?a.a.createElement(C.a,{fontSize:"small"}):a.a.createElement(H.a,{fontSize:"small"}))))))}var M=a.a.memo(U);const D=function(e){return{wrapComponents:{info:()=>()=>null,authorizeBtn:()=>()=>null,authorizeOperationBtn:()=>()=>null,OperationSummary:t=>s=>a.a.createElement(M,{BaseLayout:t,oldProps:s,spec:e})}}},B=e=>{const{spec:t,accessTokenProvider:s,authorizationHeader:i,api:o,securitySchemeType:r}=e,c={spec:t,validatorUrl:null,defaultModelsExpandDepth:-1,docExpansion:"list",requestInterceptor:e=>{const{url:t}=e,{context:n}=o,a=n+"/*";if("apikey"===i?e.headers[i]=s():"BASIC"===r?e.headers[i]="Basic "+s():"TEST"===r||o.advertiseInfo&&o.advertiseInfo.advertised&&""!==i?e.headers[i]=s():e.headers[i]="Bearer "+s(),t.endsWith(a))e.url=t.substring(0,t.length-2);else if(t.includes(a+"?")){const s=t.split("/*?");e.url=s.length>1?s[0]+"?"+s[1]:s[0]}return e},defaultModelExpandDepth:-1,plugins:[D(t)]},[d,u]=Object(n.useState)(),[l,p]=Object(n.useState)();return Object(n.useEffect)(()=>{if(!l)return;const e=document.querySelectorAll(".opblock .authorization__btn");let t=0;for(;t<e.length;t++)e[t].remove();document.querySelector(".schemes select").setAttribute("id","schemes"),document.getElementById("unlocked").parentNode.parentNode.remove(),p(!1)},[l]),Object(n.useEffect)(()=>{p(!0)},[d]),a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,c),u)};B.propTypes={accessTokenProvider:d.a.func.isRequired,authorizationHeader:d.a.string.isRequired,api:d.a.shape({context:d.a.string.isRequired}).isRequired,spec:d.a.string.isRequired};var q=B,z=s(1604),V=s(1117);function L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function J(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?L(Object(s),!0).forEach((function(t){F(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Y extends a.a.Component{constructor(e){super(e),this.state={securitySchemeType:"OAUTH",username:"",password:"",scopes:[],selectedKeyType:"PRODUCTION",keys:[],productionApiKey:"",sandboxApiKey:"",selectedKeyManager:"Resident Key Manager",advAuthHeader:"Authorization",advAuthHeaderValue:"",selectedEndpoint:"PRODUCTION"},this.accessTokenProvider=this.accessTokenProvider.bind(this),this.updateSwagger=this.updateSwagger.bind(this),this.setSecurityScheme=this.setSecurityScheme.bind(this),this.setSelectedEnvironment=this.setSelectedEnvironment.bind(this),this.setProductionAccessToken=this.setProductionAccessToken.bind(this),this.setSandboxAccessToken=this.setSandboxAccessToken.bind(this),this.setUsername=this.setUsername.bind(this),this.setPassword=this.setPassword.bind(this),this.setSelectedKeyType=this.setSelectedKeyType.bind(this),this.setSectedKeyManager=this.setSelectedKeyManager.bind(this),this.setKeys=this.setKeys.bind(this),this.updateAccessToken=this.updateAccessToken.bind(this),this.setProductionApiKey=this.setProductionApiKey.bind(this),this.setSandboxApiKey=this.setSandboxApiKey.bind(this),this.converttopostman=this.convertToPostman.bind(this),this.setAdvAuthHeader=this.setAdvAuthHeader.bind(this),this.setAdvAuthHeaderValue=this.setAdvAuthHeaderValue.bind(this),this.setSelectedEndpoint=this.setSelectedEndpoint.bind(this)}componentDidMount(){const{api:e}=this.context,t=e.id,s=p.a.getUser();let n,a,i,o;this.apiClient=new O.a;this.apiClient.getAPIById(t).then(e=>{if(n=e.obj,n.endpointURLs&&(a=n.endpointURLs.map(e=>({name:e.environmentName,displayName:e.environmentDisplayName}))),n.scopes){const e=n.scopes.map(e=>e.key);this.setState({scopes:e})}return a&&a.length>0?(i=a[0].name,this.apiClient.getSwaggerByAPIIdAndEnvironment(t,i)):this.apiClient.getSwaggerByAPIId(t)}).then(e=>{o=e.obj;let r="OAUTH";return n.securityScheme.includes("oauth2")||(r=n.securityScheme.includes("api_key")?"API-KEY":"BASIC"),this.setState({api:n,swagger:o,environments:a,productionAccessToken:void 0,sandboxAccessToken:void 0,selectedEnvironment:i,securitySchemeType:r}),null!=s?this.apiClient.getSubscriptions(t):null}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}setSecurityScheme(e){this.setState({securitySchemeType:e})}setSelectedEnvironment(e){this.setState({selectedEnvironment:e})}setProductionAccessToken(e){this.setState({productionAccessToken:e})}setSandboxAccessToken(e){this.setState({sandboxAccessToken:e})}setProductionApiKey(e){this.setState({productionApiKey:e})}setSandboxApiKey(e){this.setState({sandboxApiKey:e})}setUsername(e){this.setState({username:e})}setPassword(e){this.setState({password:e})}setSelectedKeyType(e,t,s){t?this.setState({selectedKeyType:e},this.updateAccessToken(s)):this.setState({selectedKeyType:e})}setSelectedKeyManager(e,t,s){t?this.setState({selectedKeyManager:e},this.updateAccessToken(s)):this.setState({selectedKeyManager:e})}setKeys(e){this.setState({keys:e})}setAdvAuthHeader(e){this.setState({advAuthHeader:e})}setAdvAuthHeaderValue(e){this.setState({advAuthHeaderValue:e})}setSelectedEndpoint(e){this.setState({selectedEndpoint:e})}setServersSpec(e,t){let s;const[n,a]=t.split("://");return"http"===n?s=["http"]:"https"===n&&(s=["https"]),J(J({},e),{},{schemes:s,host:a})}convertToPostman(e){E.a.convert({type:"string",data:e},{},(t,s)=>{if(s.result)v()(JSON.stringify(s.output[0].data),"postman collection");else{const t=k.a.convert(e);t?v()(JSON.stringify(t),"postman collection"):console.log("Could not convert")}})}updateAccessToken(e){const{selectedKeyType:t,selectedKeyManager:s,keys:n}=this.state;let a;n.get(s)&&n.get(s).keyType===t?(({accessToken:a}=n.get(s).token),"PRODUCTION"===t?this.setProductionAccessToken(a):this.setSandboxAccessToken(a)):V.a.get(e).then(e=>e.getKeys(t)).then(e=>{e.get(s)&&e.get(s).keyType===t&&({accessToken:a}=e.get(s).token),"PRODUCTION"===e.get(s).keyType?this.setProductionAccessToken(a):this.setSandboxAccessToken(a),this.setKeys(e)})}accessTokenProvider(){const{securitySchemeType:e,username:t,password:s,productionAccessToken:n,sandboxAccessToken:a,selectedKeyType:i,productionApiKey:o,sandboxApiKey:r,api:c,advAuthHeaderValue:d}=this.state;if(c.advertiseInfo&&c.advertiseInfo.advertised)return d;if("BASIC"===e){return btoa(t+":"+s)}return"API-KEY"===e?"PRODUCTION"===i?o:r:"PRODUCTION"===i?n:a}updateSwagger(e){const{api:t,environments:s}=this.state;let n;n=e&&s.find(t=>t.name===e)?this.apiClient.getSwaggerByAPIIdAndEnvironment(t.id,e):this.apiClient.getSwaggerByAPIId(t.id),n.then(e=>{this.setState({swagger:e.obj})})}render(){const{classes:e}=this.props,{api:t,notFound:s,swagger:n,securitySchemeType:c,selectedEnvironment:d,environments:u,scopes:y,username:S,password:b,productionAccessToken:v,sandboxAccessToken:T,selectedKeyType:E,sandboxApiKey:P,productionApiKey:k,selectedKeyManager:I,advAuthHeader:O,advAuthHeaderValue:w,selectedEndpoint:x}=this.state,C=p.a.getUser(),R=JSON.stringify(J({},n)),N="data:text/json;charset=utf-8, "+encodeURIComponent(R);if(null==t||null==n)return a.a.createElement(K.a,null);if(s)return"API Not found !";let j=!1,H=t.authorizationHeader?t.authorizationHeader:"Authorization";t&&t.securityScheme&&(j=t.securityScheme.includes("api_key"),j&&"API-KEY"===c&&(H="apikey"));let U=n;return t.advertiseInfo&&t.advertiseInfo.advertised&&(H=O,U=U.openapi?J(J({},n),{},"PRODUCTION"===x?{servers:[{url:t.advertiseInfo.apiExternalProductionEndpoint}]}:{servers:[{url:t.advertiseInfo.apiExternalSandboxEndpoint}]}):"PRODUCTION"===x?this.setServersSpec(U,t.advertiseInfo.apiExternalProductionEndpoint):this.setServersSpec(U,t.advertiseInfo.apiExternalSandboxEndpoint)),a.a.createElement(a.a.Fragment,null,a.a.createElement(h.a,{className:e.paper},a.a.createElement(o.a,{container:!0,className:e.grid},!C&&(!t.advertiseInfo||!t.advertiseInfo.advertised)&&a.a.createElement(o.a,{item:!0,md:6},a.a.createElement(h.a,{className:e.userNotificationPaper},a.a.createElement(r.a,{variant:"h5",component:"h3"},a.a.createElement(l.a,null,"warning")," ",a.a.createElement(i.a,{id:"notice",defaultMessage:"Notice"})),a.a.createElement(r.a,{component:"p"},a.a.createElement(i.a,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),a.a.createElement(z.a,{setSecurityScheme:this.setSecurityScheme,securitySchemeType:c,setSelectedEnvironment:this.setSelectedEnvironment,selectedEnvironment:d,productionAccessToken:v,setProductionAccessToken:this.setProductionAccessToken,sandboxAccessToken:T,setSandboxAccessToken:this.setSandboxAccessToken,swagger:U,environments:u,scopes:y,setUsername:this.setUsername,setPassword:this.setPassword,username:S,password:b,setSelectedKeyType:this.setSelectedKeyType,selectedKeyType:E,setSelectedKeyManager:this.setSelectedKeyManager,selectedKeyManager:I,updateSwagger:this.updateSwagger,setKeys:this.setKeys,setProductionApiKey:this.setProductionApiKey,setSandboxApiKey:this.setSandboxApiKey,productionApiKey:k,sandboxApiKey:P,setAdvAuthHeader:this.setAdvAuthHeader,setAdvAuthHeaderValue:this.setAdvAuthHeaderValue,advAuthHeader:O,advAuthHeaderValue:w,setSelectedEndpoint:this.setSelectedEndpoint,selectedEndpoint:x,api:this.state.api,URLs:null}),"SOAP"!==t.type&&a.a.createElement(o.a,{container:!0},a.a.createElement(o.a,{xs:8,item:!0}),a.a.createElement(o.a,{xs:2,item:!0},a.a.createElement(m.a,{size:"small",onClick:()=>this.convertToPostman(R)},a.a.createElement(f.Icon,{icon:g.a,width:30,height:30,className:e.buttonIcon}),a.a.createElement(i.a,{id:"Apis.Details.APIConsole.APIConsole.download.postman",defaultMessage:"Postman collection"}))),a.a.createElement(o.a,{xs:2,item:!0},a.a.createElement("a",{href:N,download:"swagger.json"},a.a.createElement(m.a,{size:"small"},a.a.createElement(f.Icon,{icon:A.a,width:30,height:30,className:e.buttonIcon}),a.a.createElement(i.a,{id:"Apis.Details.APIConsole.APIConsole.download.swagger",defaultMessage:"OpenAPI"})))))),a.a.createElement(h.a,{className:e.swaggerUIPaper},a.a.createElement(q,{api:this.state.api,accessTokenProvider:this.accessTokenProvider,spec:U,authorizationHeader:H,securitySchemeType:c})))}}Y.propTypes={classes:d.a.shape({paper:d.a.string.isRequired,titleSub:d.a.string.isRequired,grid:d.a.string.isRequired,userNotificationPaper:d.a.string.isRequired,buttonIcon:d.a.string.isRequired,iconify:d.a.string.isRequired}).isRequired},Y.contextType=I.a;t.default=Object(u.a)(e=>({iconify:{marginRight:10,font:24},buttonIcon:{marginRight:10},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),color:e.palette.getContrastText(e.palette.background.default)},swaggerUIPaper:{backgroundColor:e.custom.apiDetailPages.swaggerUIBackground}}))(Y)}}]);
//# sourceMappingURL=APIConsole.e692d99b83731b72dbe6.bundle.js.map