(this.webpackJsonp=this.webpackJsonp||[]).push([[32],{3982:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var n=a(2),o=a.n(n),r=a(1630),s=a(17),i=a.n(s),c=a(1665),l=a(1619),u=a(1314),p=a(1618),d=a(1657),m=a(42),b=a(3951),f=a(1072),g=a(1604),h=a(1084),E=a(334),A=a(192),y=a(3882),C=a(3685),S=a(3684),x=a(1247),O=a.n(x),v=a(3967),I=a(1662),k=a(1099),w=a.n(k),$=a(1623),P=a(1275),j=a(1603),R=a(1453),T=a(1678),U=a(9),H=a(3966);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function D(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){L(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M(e,t){let{field:a,value:n}=t;return D(D({},e),{},{[a]:n})}var z=function(e){const t=Object(u.a)(),a=e.topic.type.toLowerCase(),r="publish"===a||"subscribe"===a?a.substr(0,3):a,s=Object(P.makeStyles)(e=>{const t=e.custom.resourceChipColors[r];return{bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(1)}},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12},bootstrapCurl:{borderRadius:4,backgroundColor:e.custom.curlGenerator.backgroundColor,color:e.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600},subscriptionSummary:{backgroundColor:U.a.hexToRGBA(t,.1),maxHeight:"40px",borderColor:"#80bdff","&$expanded":{maxHeight:"40px"}},customButton:{backgroundColor:"#ffffff",borderColor:t,color:t,width:e.spacing(2)},subscription:{marginBottom:"10px",border:"1px solid "+t}}}),{generateGenericWHSubscriptionCurl:i,topic:d}=e,m={topic:d.name,secret:null,lease:5e4,mode:"subscribe",callback:null},[b,g]=Object(n.useState)(i(m)),[h,E]=Object(n.useState)(!1),[A,x]=Object(n.useReducer)(M,m),k=e=>{x({field:e.target.name,value:e.target.value})},N=s();return o.a.createElement(y.a,{className:N.subscription},o.a.createElement(S.a,{expandIcon:o.a.createElement(O.a,null),"aria-controls":"wh-subscription-content",id:"wh-subscription-header",className:N.subscriptionSummary},o.a.createElement(c.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:0},o.a.createElement(c.a,{item:!0,md:11},o.a.createElement(H.a,{invisible:"false",color:"error",variant:"dot"},o.a.createElement(I.a,{disableFocusRipple:!0,variant:"outlined",size:"small",className:N.customButton},r.toUpperCase())),o.a.createElement(l.a,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},d.name)))),o.a.createElement(C.a,null,o.a.createElement(c.a,{container:!0,direction:"column",wrap:"nowrap"},o.a.createElement(c.a,{item:!0,xs:6},o.a.createElement(R.a,{"aria-label":"mode",name:"mode",value:A.mode,row:!0,onChange:k},o.a.createElement(T.a,{value:"subscribe",control:o.a.createElement(j.a,null),label:t.formatMessage({defaultMessage:"Subscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Subscribe"})}),o.a.createElement(T.a,{value:"unsubscribe",control:o.a.createElement(j.a,null),label:t.formatMessage({defaultMessage:"Unsubscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Unsubscribe"})}))),o.a.createElement(c.a,{item:!0,xs:6},o.a.createElement($.a,{name:"callback",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Callback URL",id:"Apis.Details.AsyncApiConsole.Webhooks.callback"}),error:h,required:!0,placeholder:"www.webhook.site",onChange:k,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:N.bootstrapRoot,input:N.bootstrapInput}},InputLabelProps:{shrink:!0}})),"subscribe"===A.mode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{item:!0,xs:6},o.a.createElement($.a,{name:"secret",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Secret",id:"Apis.Details.AsyncApiConsole.Webhooks.secret"}),placeholder:"secret",onChange:k,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:N.bootstrapRoot,input:N.bootstrapInput}},InputLabelProps:{shrink:!0}})),o.a.createElement(c.a,{item:!0,xs:6},o.a.createElement($.a,{name:"lease",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Lease Seconds",id:"Apis.Details.AsyncApiConsole.Webhooks.lease"}),onChange:k,defaultValue:5e4,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:N.bootstrapRoot,input:N.bootstrapInput}},InputLabelProps:{shrink:!0}}))),o.a.createElement(c.a,{item:!0,xs:12},o.a.createElement($.a,{label:t.formatMessage({defaultMessage:"cURL",id:"Apis.Details.AsyncApiConsole.Webhooks.curl"}),defaultValue:"",value:b,fullWidth:!0,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:N.bootstrapRoot,input:N.bootstrapCurl}},InputLabelProps:{shrink:!0,className:N.bootstrapFormLabel}})))),o.a.createElement(v.a,{style:{paddingRight:"18px"}},o.a.createElement(I.a,{size:"small",onClick:()=>{!A.callback||A.callback.length<1?E(!0):(E(!1),g(i(A)))}},o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),o.a.createElement(w.a,{text:b,onCopy:()=>f.a.info(t.formatMessage({defaultMessage:"cURL copied",id:"Apis.Details.AsyncApiConsole.Webhooks.curl.copied"}))},o.a.createElement(I.a,{size:"small"},o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"})))))};function B(e){const t=e.topic.type.toLowerCase(),a="publish"===t||"subscribe"===t?t.substr(0,3):t,r=Object(P.makeStyles)(e=>{const t=e.custom.resourceChipColors[a];return{bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(1)}},bootstrapCurl:{borderRadius:4,backgroundColor:e.custom.curlGenerator.backgroundColor,color:e.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600},subscriptionSummary:{backgroundColor:U.a.hexToRGBA(t,.1),maxHeight:"40px","&$expanded":{maxHeight:"40px"}},customButton:{backgroundColor:"#ffffff",borderColor:t,color:t,width:e.spacing(2)},subscription:{marginBottom:"10px",border:"1px solid "+t}}}),{generateGenericSubscriptionCommand:s,topic:i,expandable:u}=e,[d,m]=Object(n.useState)(s(i)),b=r();return o.a.createElement(y.a,{className:b.subscription,style:{pointerEvents:u?"auto":"none"}},o.a.createElement(S.a,{expandIcon:u&&o.a.createElement(O.a,null),"aria-controls":"generic-subscription-content",id:"generic-subscription-header",className:b.subscriptionSummary},o.a.createElement(c.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:0},o.a.createElement(c.a,{item:!0,md:11},o.a.createElement(H.a,{invisible:"false",color:"error",variant:"dot"},o.a.createElement(I.a,{disableFocusRipple:!0,variant:"outlined",size:"small",className:b.customButton},a.toUpperCase())),o.a.createElement(l.a,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},i.name)))),o.a.createElement(C.a,null,o.a.createElement(c.a,{container:!0,direction:"column",wrap:"nowrap"},o.a.createElement($.a,{label:"cURL",defaultValue:"",value:d,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:b.bootstrapRoot,input:b.bootstrapCurl}},InputLabelProps:{shrink:!0,className:b.bootstrapFormLabel}}))),o.a.createElement(v.a,{style:{paddingRight:"18px"}},o.a.createElement(I.a,{size:"small",onClick:()=>{m(s(i))}},o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),o.a.createElement(w.a,{text:d,onCopy:()=>f.a.info(o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.Copied",defaultMessage:"cURL copied"}))},o.a.createElement(I.a,{size:"small"},o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"})))))}var G=a(2014),W=a(1633),X=a(1624),F=a(2012),K=a(90);const Y=Object(P.makeStyles)(e=>({endpointSelectorRoot:{paddingBottom:"20px"},selectList:{minWidth:"130px",maxWidth:"100%",border:"2px solid #41444e",fontFamily:"sans-serif",fontSize:"14px",fontWeight:700,padding:"2px 2px 2px 10px",borderRadius:"4px",color:"#3b4151"}}));function _(e){const t=Y(),a=Object(u.a)(),{authorizationHeader:r,URLs:s,securitySchemeType:i,accessTokenProvider:c}=e,{api:l}=Object(n.useContext)(h.a),p=l.advertiseInfo&&l.advertiseInfo.advertised;let d;d=s&&(s.http||s.https),l.type===K.a.API_TYPES.WS&&(d=s&&(s.ws||s.wss));let m=!0;s&&(s.http||s.https)||(m=!1);const[b,g]=Object(n.useState)(""),[y,C]=Object(n.useState)(d);Object(n.useEffect)(()=>{const e=l.id;(new E.a).getAllTopics(e).then(e=>{g(e.body)}).catch(e=>{console.log(e),f.a.error(a.formatMessage({id:"Apis.Details.AsyncApiConsole.AsyncApiUI.topics.get.error",defaultMessage:"Error while retrieving topics for the API."}))})},[]);const S=e=>{C(e.target.value)};function x(){let e;return e="apikey"===r?c():"BASIC"===i?"Basic "+c():p?c():"Bearer "+c(),e}function O(e){const{topic:t,callback:a,secret:n,mode:o,lease:s}=e,i=x();if("subscribe"===o){let e=`curl -X POST '${y}?hub.topic=${encodeURIComponent(t)}&hub.callback=${encodeURIComponent(a)}&hub.mode=${o}`;return n&&(e+="&hub.secret="+n),s&&(e+="&hub.lease_seconds="+s),l.advertiseInfo&&l.advertiseInfo.adveritsed&&""!==r?e+=`' -H '${r}: ${i}'`:e+=`' -H 'Authorization: ${i}'`,e}{let e=`curl -X POST '${y}?hub.topic=${encodeURIComponent(t)}&hub.callback=${encodeURIComponent(a)}&hub.mode=${o}' -H 'Authorization: ${i}'`;return p&&""!==r&&(e=`curl -X POST '${y}?hub.topic=${encodeURIComponent(t)}&hub.callback=${encodeURIComponent(a)}&hub.mode=${o}' -H '${r}: ${i}'`),e}}function v(e){let t=e.name;return"/"===t.charAt(0)&&(t=t.substring(1)),t}function I(e){const t=x();if(e.name.includes("*")){let e=`wscat -c '${y}' -H 'Authorization: ${t}'`;return p&&""!==r&&(e=`wscat -c '${y}' -H '${r}: ${t}'`),e}{let a=`wscat -c '${y}/${v(e)}' -H 'Authorization: ${t}'`;return p&&""!==r&&(a=`wscat -c '${y}/${v(e)}' -H '${r}: ${t}'`),a}}function k(e){const t=x();if(e.name.includes("*")){let e=`curl -X GET '${y}' -H 'Authorization: ${t}'`;return p&&""!==r&&(e=`curl -X GET '${y}' -H '${r}: ${t}'`),e}{let a=`curl -X GET '${y}/${v(e)}' -H 'Authorization: ${t}'`;return p&&""!==r&&(a=`curl -X GET '${y}/${v(e)}' -H '${r}: ${t}'`),a}}function w(e){const t=x();if(e.name.includes("*")){let e=`curl -X GET '${y}' -H 'Authorization: ${t}'`;return""!==r&&(e=`curl -X GET '${y}' -H '${r}: ${t}'`),e}{let a=`curl -X GET '${y}/${v(e)}' -H 'Authorization: ${t}'`;return""!==r&&(a=`curl -X GET '${y}/${v(e)}' -H '${r}: ${t}'`),a}}return b?o.a.createElement(o.a.Fragment,null,o.a.createElement(X.a,{className:t.endpointSelectorRoot},o.a.createElement(G.a,null,"Servers"),o.a.createElement(F.a,{className:t.selectList,id:"api-endpoint-select",value:y,displayEmpty:!0,onChange:S},Object.entries(s).map(e=>{let[t,a]=e;if(a)return o.a.createElement(W.a,{value:a,key:t},a)}))),l.type===K.a.API_TYPES.WEBSUB&&b.list.map((e,t)=>o.a.createElement(z,{topic:e,generateGenericWHSubscriptionCurl:O,expandable:!0})),l.type===K.a.API_TYPES.SSE&&b.list.map((e,t)=>o.a.createElement(B,{generateGenericSubscriptionCommand:k,topic:e,expandable:!0})),l.type===K.a.API_TYPES.WS&&b.list.map((e,t)=>o.a.createElement(B,{generateGenericSubscriptionCommand:I,topic:e,expandable:!0})),l.type===K.a.API_TYPES.ASYNC&&b.list.map((e,t)=>o.a.createElement(B,{generateGenericSubscriptionCommand:w,topic:e,expandable:m}))):o.a.createElement(A.a,null)}const q=Object(d.a)(e=>({paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}));function V(){Object(u.a)();const e=q(),{api:t}=Object(n.useContext)(h.a),[a,s]=Object(n.useState)("OAUTH"),[i,d]=Object(n.useState)(),[f,y]=Object(n.useState)(),[C,S]=Object(n.useState)(),[x,O]=Object(n.useState)(null),[v,I]=Object(n.useState)(null),[k,w]=Object(n.useState)(null),[$,P]=Object(n.useState)(""),[j,R]=Object(n.useState)(""),[T,U]=Object(n.useState)("PRODUCTION"),[H,N]=Object(n.useState)([]),[D,L]=Object(n.useState)(""),[M,z]=Object(n.useState)(""),B=t.endpointURLs,[G,W]=Object(n.useState)(B.length>0?B[0].URLs:[]),[X,F]=Object(n.useState)(!1),[K,Y]=Object(n.useState)("Authorization"),[V,J]=Object(n.useState)(""),[Q,Z]=Object(n.useState)("PRODUCTION"),ee=m.a.getUser();function te(){let e;H.get(T)&&({accessToken:e}=H.get(T).token),"PRODUCTION"===T?y(e):S(e)}if(Object(n.useEffect)(()=>{const e=t.id;(new E.a).getAPIById(e).then(e=>{const t=e.obj;if(t.endpointURLs){const e=t.endpointURLs.map(e=>e.environmentName);O(e)}else O([]);if(t.labels){const e=t.labels.map(e=>e.name);w(e)}else w([]);if(t.scopes){const e=t.scopes.map(e=>e.name);I(e)}else I([])}).catch(e=>{I([]),O([]),w([]);const{status:t}=e;404===t&&F(!0)})},[]),null===t||!v||!k||!x)return o.a.createElement(A.a,null);if(X)return o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.Api.Unavailable",defaultMessage:"API Not Found !"});let ae=!1,ne=t.authorizationHeader?t.authorizationHeader:"Authorization";t&&t.securityScheme&&(ae=t.securityScheme.includes("api_key"),ae&&"API-KEY"===a&&(ne="apikey")),t.advertiseInfo&&t.advertiseInfo.advertised&&(ne=K);const oe=e=>{const t={http:null,https:null,ws:null,wss:null},[a]=e.split("://");return t[a]=e,t};return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{variant:"h4",className:e.titleSub},o.a.createElement(p.a,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.title",defaultMessage:"Try Out"})),o.a.createElement(r.a,{className:e.paper},o.a.createElement(c.a,{container:!0,className:e.grid},!ee&&(!t.advertiseInfo||!t.advertiseInfo.advertised)&&o.a.createElement(c.a,{item:!0,md:6},o.a.createElement(r.a,{className:e.userNotificationPaper},o.a.createElement(l.a,{variant:"h5",component:"h3"},o.a.createElement(b.a,null,"warning")," ",o.a.createElement(p.a,{id:"notice",defaultMessage:"Notice"})),o.a.createElement(l.a,{component:"p"},o.a.createElement(p.a,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),o.a.createElement(g.a,{setSecurityScheme:s,securitySchemeType:a,setSelectedEnvironment:d,selectedEnvironment:i,productionAccessToken:f,setProductionAccessToken:y,sandboxAccessToken:C,setSandboxAccessToken:S,environments:x,scopes:v,labels:k,setUsername:P,setPassword:R,username:$,password:j,setSelectedKeyType:function(e,a){!a||t.advertiseInfo&&t.advertiseInfo.advertised?U(e):U(e,te)},selectedKeyType:T,setKeys:N,setURLs:W,setProductionApiKey:z,setSandboxApiKey:L,productionApiKey:M,sandboxApiKey:D,environmentObject:B,setAdvAuthHeader:Y,setAdvAuthHeaderValue:J,advAuthHeader:K,advAuthHeaderValue:V,setSelectedEndpoint:Z,selectedEndpoint:Q,api:t,URLs:null})),o.a.createElement(r.a,{className:e.paper},o.a.createElement(_,{authorizationHeader:ne,URLs:(()=>{if(t.advertiseInfo&&t.advertiseInfo.advertised){if("PRODUCTION"===Q)return oe(t.advertiseInfo.apiExternalProductionEndpoint);if("SANDBOX"===Q)return oe(t.advertiseInfo.apiExternalSandboxEndpoint)}return G})(),securitySchemeType:a,accessTokenProvider:function(){if(t.advertiseInfo&&t.advertiseInfo.advertised)return V;if("BASIC"===a){return btoa($+":"+j)}return"API-KEY"===a?"PRODUCTION"===T?M:D:"PRODUCTION"===T?f:C}})))}V.propTypes={classes:i.a.shape({paper:i.a.string.isRequired,titleSub:i.a.string.isRequired,root:i.a.string.isRequired}).isRequired}}}]);
//# sourceMappingURL=32.2e4ec04f204103b8b171.bundle.js.map